# pyproject.toml

[build-system]
# This part is correct: it tells Python to use Poetry to build the project.
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

# --- Poetry Project Metadata ---
# This [tool.poetry] section replaces the old [project] section.
# Poetry uses this to manage dependencies and package details.
[tool.poetry]
name = "core"
version = "0.1.0"
description = "CORE: A self-governing, intent-driven software development system."
authors = ["Your Name or Organization <your_email@example.com>"] # <-- UPDATE THIS LINE
license = "MIT"
readme = "README.md"
packages = [{include = "core", from = "src"}] # Tells Poetry about the src layout

# --- Main Dependencies ---
# This replaces the old [project].dependencies array.
[tool.poetry.dependencies]
python = ">=3.9"
fastapi = ">=0.95.0"
uvicorn = ">=0.21.0"
pyyaml = ">=6.0"
requests = ">=2.28.0"
python-dotenv = ">=1.0.0"

# --- Development Dependencies ---
# This replaces the old [project.optional-dependencies].
# All dev/test tools go here. You install them with `poetry install --with dev`.
[tool.poetry.group.dev.dependencies]
pytest = ">=7.0,<8.0" # Pinned to avoid the conflict we saw
pytest-asyncio = "==0.21.0" # Pinned to the version we know works
ruff = ">=0.0.254"

# --- Command-Line Scripts ---
# This replaces the old [project.scripts] section.
[tool.poetry.scripts]
# core-cli = "core.main:main" # Uncomment if you create a CLI entry point

# --- Configuration for development tools (These do not change) ---
[tool.ruff]
line-length = 88
select = ["E", "W", "F", "I"]

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
pythonpath = ["src"]