# .intent/policies/code_health_policy.yaml
#
# This policy defines the machine-enforceable rules for maintaining the
# health, clarity, and atomicity of the codebase ("The Body").
# These rules are enforced by the 'audit.check.codebase_health' capability.

rules:
  # Defines the maximum acceptable Cognitive Complexity for any single function.
  # Functions exceeding this limit are considered too difficult for a human to
  # reliably understand and maintain.
  # Recommended starting value: 15
  max_cognitive_complexity: 15

  # Defines the maximum acceptable nesting depth (e.g., if inside for inside if).
  # Deeply nested logic is a primary source of bugs and confusion.
  # This rule formalizes the soft rule that was previously in intent_guard.yaml.
  # Recommended starting value: 4
  max_nesting_depth: 4

  # --- THIS IS THE NEW RULE ---
  # Defines the recommended maximum line length for code clarity.
  # This is a "soft" guideline. While 'black' will attempt to format to 88
  # characters, this rule allows the auditor to flag lines that remain
  # excessively long, suggesting they may need manual refactoring.
  max_line_length:
    # Set slightly higher than black's default to only catch egregious cases.
    limit: 100
    # This is a 'soft' rule; it will produce a WARNING, not an ERROR,
    # encouraging refactoring without blocking commits.
    enforcement: soft
  # --- END OF NEW RULE ---

  # Defines the statistical threshold for identifying file size outliers.
  # A file is flagged as an outlier if its Logical Lines of Code (LLOC)
  # is greater than (average_lloc + standard_deviations * lloc_std_dev).
  # Recommended starting value: 2.0
  outlier_standard_deviations: 2.0