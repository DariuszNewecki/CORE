# .intent/policies/agent_reasoning_policy.yaml
#
# This policy governs the cognitive process of all autonomous agents, ensuring
# their actions are based on an accurate self-image and a respect for existing
# capabilities. It is the constitutional safeguard against stale knowledge and
# redundant work.

rules:
  - id: reason_from_reality
    description: >
      An agent's reasoning must always be based on the current, true state of the
      codebase. The Knowledge Graph must be considered "dirty" and must be
      regenerated after any action that modifies source code.
    enforcement: hard
    # This is a procedural enforcement. The orchestrator (e.g., the 'develop' command)
    # MUST run the 'manifest_updating' capability before initiating a planning cycle.
    required_action_before_planning: "manifest_updating"

  - id: reuse_before_building
    description: >
      Before generating any new function or class, an agent's PLAN must include
      a step that explicitly justifies why an existing, similar capability cannot
      be reused.
    enforcement: soft
    required_justification_for_action: "code_generation"
    evidence:
      - "Query sent to Knowledge Graph for similar capabilities."
      - "LLM-generated rationale for why reuse is not feasible."