{
  "id": "standard_architecture_events",
  "version": "2.0.0",
  "title": "Architecture Standard \u2013 Event Schema",
  "type": "policy",
  "status": "active",
  "owners": {
    "accountable": "Architecture Owner",
    "responsible": [
      "Core Maintainer"
    ]
  },
  "review": {
    "frequency": "12 months"
  },
  "schema_id": "meta.policy",
  "purpose": "Establishes the canonical schema for all system events (Audit, Governance, Operational). Decouples the \"Body\" (emitters) from the \"Will\" (agents/monitors).\n",
  "rules": [
    {
      "id": "events.cloudevents_compliance",
      "category": "events",
      "rationale": "Strengthens system governance regarding events.cloudevents_compliance.",
      "enforcement": "error",
      "statement": "All system events MUST conform to the CloudEvents 1.0 specification structure.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: All system events MUST conform to the CloudEvents 1.0 specification structure."
        }
      }
    },
    {
      "id": "events.topic_naming",
      "category": "events",
      "rationale": "Strengthens system governance regarding events.topic_naming.",
      "enforcement": "error",
      "statement": "Event types MUST follow the pattern 'core.<domain>.<entity>.<verb>'.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Event types MUST follow the pattern 'core.<domain>.<entity>.<verb>'."
        }
      }
    },
    {
      "id": "events.payload_immutability",
      "category": "events",
      "rationale": "Strengthens system governance regarding events.payload_immutability.",
      "enforcement": "error",
      "statement": "Event payloads MUST be treated as immutable once emitted.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Event payloads MUST be treated as immutable once emitted."
        }
      }
    }
  ],
  "topic_naming_examples": [
    "core.governance.audit.failed",
    "core.agent.thought.created",
    "core.system.file.modified"
  ],
  "structure": {
    "envelope": {
      "required_fields": [
        {
          "name": "id",
          "type": "uuid",
          "description": "Unique event identifier"
        },
        {
          "name": "source",
          "type": "uri",
          "description": "System component that generated the event (e.g., 'service:intent_guard')"
        },
        {
          "name": "specversion",
          "type": "string",
          "default": "1.0"
        },
        {
          "name": "type",
          "type": "string",
          "description": "The event topic (e.g., 'core.governance.violation')"
        },
        {
          "name": "datacontenttype",
          "type": "string",
          "default": "application/json"
        },
        {
          "name": "time",
          "type": "iso8601"
        },
        {
          "name": "data",
          "type": "object",
          "description": "The domain-specific payload"
        }
      ]
    },
    "standard_payloads": {
      "violation_event": {
        "type": "core.governance.violation",
        "data": {
          "rule_id": "string",
          "severity": "string",
          "resource_path": "string",
          "message": "string"
        }
      },
      "audit_event": {
        "type": "core.governance.audit.completed",
        "data": {
          "audit_id": "uuid",
          "passed": "boolean",
          "violations_count": "integer",
          "duration_ms": "integer"
        }
      },
      "agent_state_event": {
        "type": "core.agent.state.changed",
        "data": {
          "agent_id": "string",
          "task_id": "string",
          "old_state": "string",
          "new_state": "string"
        }
      }
    }
  },
  "metadata": {
    "status": "active",
    "effective_date": "2025-12-18",
    "migration_notes": "Converted from legacy nested format to flat rules structure v2.0.0"
  },
  "additionalProperties": false
}
