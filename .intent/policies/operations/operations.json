{
  "id": "standard_operations_general",
  "version": "1.0.0",
  "title": "Operations Standard \u2013 General Operational Rules",
  "type": "standard_operations",
  "status": "active",
  "owners": {
    "accountable": "Platform SRE",
    "responsible": [
      "Core Maintainer"
    ]
  },
  "review": {
    "frequency": "12 months"
  },
  "schema_id": "policy.structure",
  "policy_id": "a3e1b0c4-9f8d-4a7b-8c1d-6e5f4a3b2c1d",
  "purpose": "Unified operational governance for intent crates, integration workflows, canary deployments, self-healing routines, developer fastpaths, incident response, and runtime safety.\n",
  "rules": [
    {
      "id": "intent.schema_compliance",
      "scope": "intent_crates.validation",
      "rationale": "Strengthens system governance regarding intent.schema_compliance.",
      "enforcement": "error",
      "statement": "All intent crates MUST pass schema validation against the intent crate schema.",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "intent.canary_required",
      "scope": "intent_crates.lifecycle",
      "rationale": "Strengthens system governance regarding intent.canary_required.",
      "enforcement": "error",
      "statement": "All intent crates MUST pass a canary audit in an isolated environment before application.",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "intent.immutable_history",
      "scope": "intent_crates.lifecycle",
      "rationale": "Strengthens system governance regarding intent.immutable_history.",
      "enforcement": "error",
      "statement": "Processed intent crates MUST be moved to accepted or rejected and MUST NOT be modified in place.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Processed intent crates MUST be moved to accepted or rejected and MUST NOT be modified in place."
        }
      }
    },
    {
      "id": "integration.assign_ids_required",
      "command": "core-admin fix ids --write",
      "rationale": "Strengthens system governance regarding integration.assign_ids_required.",
      "enforcement": "error",
      "statement": "Stable UUIDs MUST be assigned to all new public symbols before integration.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Stable UUIDs MUST be assigned to all new public symbols before integration."
        }
      }
    },
    {
      "id": "integration.duplicate_ids_resolved",
      "command": "core-admin fix duplicate-ids --write",
      "rationale": "Strengthens system governance regarding integration.duplicate_ids_resolved.",
      "enforcement": "error",
      "statement": "Duplicate '# ID:' tags MUST be resolved before integration.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Duplicate '# ID:' tags MUST be resolved before integration."
        }
      }
    },
    {
      "id": "integration.knowledge_sync_required",
      "command": "core-admin manage database sync-knowledge --write",
      "rationale": "Strengthens system governance regarding integration.knowledge_sync_required.",
      "enforcement": "error",
      "statement": "Codebase state MUST be synchronized with the database SSOT before integration.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Codebase state MUST be synchronized with the database SSOT before integration."
        }
      }
    },
    {
      "id": "integration.tests_must_pass",
      "command": "core-admin check tests",
      "rationale": "Strengthens system governance regarding integration.tests_must_pass.",
      "enforcement": "error",
      "statement": "Full test suite MUST pass before integration.",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "integration.coverage_minimum",
      "command": "core-admin coverage check",
      "rationale": "Strengthens system governance regarding integration.coverage_minimum.",
      "enforcement": "error",
      "statement": "Test coverage MUST meet or exceed the constitutional minimum (75%).",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "integration.audit_required",
      "command": "core-admin check audit",
      "rationale": "Strengthens system governance regarding integration.audit_required.",
      "enforcement": "error",
      "statement": "Full constitutional audit MUST pass before integration.",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "canary.abort_on_audit_error",
      "metric": "audit.errors == 0",
      "rationale": "Strengthens system governance regarding canary.abort_on_audit_error.",
      "enforcement": "error",
      "statement": "Canary deployment MUST abort if any audit error is detected.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Canary deployment MUST abort if any audit error is detected."
        }
      }
    },
    {
      "id": "canary.abort_on_test_failure",
      "metric": "tests.failed == 0",
      "rationale": "Strengthens system governance regarding canary.abort_on_test_failure.",
      "enforcement": "error",
      "statement": "Canary deployment MUST abort if any tests fail.",
      "check": {
        "engine": "workflow_gate",
        "params": {
          "check_type": "test_verification"
        }
      }
    },
    {
      "id": "dev_fastpath.no_intent_changes",
      "scope": [
        ".intent/**",
        "src/system/governance/**"
      ],
      "rationale": "Strengthens system governance regarding dev_fastpath.no_intent_changes.",
      "enforcement": "error",
      "statement": "Developer fastpath MUST NOT allow changes to intent or governance paths.",
      "check": {
        "engine": "glob_gate",
        "params": {
          "check_type": "path_restriction"
        }
      }
    },
    {
      "id": "ir.triage_required",
      "rationale": "Strengthens system governance regarding ir.triage_required.",
      "enforcement": "error",
      "statement": "All incidents MUST be triaged within 24 hours with severity and owner assigned.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: All incidents MUST be triaged within 24 hours with severity and owner assigned."
        }
      }
    },
    {
      "id": "ir.timeline_required",
      "rationale": "Strengthens system governance regarding ir.timeline_required.",
      "enforcement": "warning",
      "statement": "A minimal incident timeline MUST be recorded.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: A minimal incident timeline MUST be recorded."
        }
      }
    },
    {
      "id": "ir.notifications_required",
      "rationale": "Strengthens system governance regarding ir.notifications_required.",
      "enforcement": "warning",
      "statement": "Maintainers MUST be notified for high and critical incidents.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: Maintainers MUST be notified for high and critical incidents."
        }
      }
    },
    {
      "id": "ir.postmortem_required",
      "rationale": "Strengthens system governance regarding ir.postmortem_required.",
      "enforcement": "warning",
      "statement": "High and critical incidents REQUIRE a short postmortem with actions and owners.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: High and critical incidents REQUIRE a short postmortem with actions and owners."
        }
      }
    },
    {
      "id": "operations.runtime.env_vars_defined",
      "rationale": "Strengthens system governance regarding operations.runtime.env_vars_defined.",
      "enforcement": "error",
      "statement": "All required runtime environment variables MUST be set.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify adherence to: All required runtime environment variables MUST be set."
        }
      }
    }
  ],
  "intent_crates": {
    "description": "Change-management units governing modifications to system intent.",
    "schema": "intent_crate_schema.json",
    "lifecycle": [
      "proposed",
      "canary",
      "accepted",
      "rejected"
    ]
  },
  "integration_workflow": {
    "steps": [
      {
        "id": "linkage.assign_ids",
        "command": "core-admin fix ids --write"
      },
      {
        "id": "linkage.duplicate_ids",
        "command": "core-admin fix duplicate-ids --write"
      },
      {
        "id": "ssot.sync_knowledge",
        "command": "core-admin manage database sync-knowledge --write"
      },
      {
        "id": "quality.test_suite",
        "command": "core-admin check tests"
      },
      {
        "id": "quality.coverage_check",
        "command": "core-admin coverage check"
      },
      {
        "id": "governance.audit",
        "command": "core-admin check audit"
      }
    ]
  },
  "self_healing_routines": {
    "available": [
      {
        "id": "style.headers",
        "command": "core-admin fix headers --write"
      },
      {
        "id": "docs.docstrings",
        "command": "core-admin fix docstrings --write"
      },
      {
        "id": "quality.generate_tests",
        "command": "core-admin coverage remediate",
        "trigger": "coverage < 75%"
      }
    ]
  },
  "canary": {
    "enabled": true,
    "environments": [
      "development",
      "staging"
    ],
    "paths": [
      "src/**",
      "cli/**",
      "agents/**"
    ]
  },
  "dev_fastpath": {
    "thresholds": {
      "max_changed_files": 20
    },
    "required_checks": [
      "syntax",
      "linter",
      "formatter"
    ]
  },
  "incident_response": {
    "severity_levels": [
      "low",
      "medium",
      "high",
      "critical"
    ]
  },
  "additionalProperties": false
}
