# .intent/knowledge/capability_tags.yaml
#
# This is the canonical dictionary of all valid capability tags in the CORE system.
# The ConstitutionalAuditor verifies that any # CAPABILITY tag used in the source code
# is defined in this file.

tags:
  # --- System & Governance ---
  - name: introspection
    description: "Enables self-analysis of the system's own structure, code, or intent."
  - name: alignment_checking
    description: "Verifies that system components or actions align with constitutional principles."
  - name: manifest_updating
    description: "Modifies or generates knowledge artifacts like the knowledge_graph.json."
  - name: self_review
    description: "Enables the system to analyze its own code for quality, correctness, or improvements."
  - name: intent_guarding
    description: "Enforces constitutional rules at runtime, preventing forbidden actions."
  - name: change_safety_enforcement
    description: "Implements safety checks or operations related to modifying files or state (e.g., Git)."
  - name: system_logging
    description: "Provides system-wide logging capabilities."
  - name: system.git.initialize
    description: "Initializes the GitService and validates the repository path."

  # --- Code Validation & Quality ---
  - name: semantic_validation
    description: "Performs semantic analysis on code, beyond simple syntax checks."
  - name: syntax_validation
    description: "Performs syntax validation on code or configuration files."
  - name: code_quality_analysis
    description: "Runs a pipeline of quality checks (e.g., formatting, linting)."
  - name: test_execution
    description: "Executes automated tests (e.g., pytest) and reports results."
  - name: yaml_loading
    description: "Provides a safe, standardized way to load and parse YAML files."
  - name: code.peer_review
    description: "Orchestrates sending a code file to an external LLM for critique and suggestions for improvement."
  - name: refactor.complexity_outlier
    description: "Identifies and refactors large, complex files into smaller, more focused modules to improve separation of concerns."
  - name: classify_files_by_extension_for_validation_routing
    description: "Classifies a file's type based on its extension to route it to the correct validation pipeline."
  - name: determine_overall_validation_status_from_violations
    description: "Determines the final validation status (clean/dirty) based on the severity of reported violations."
  - name: route_files_to_appropriate_validation_pipeline
    description: "Acts as the main entry point for validation, routing files to specialized validators based on type."
  - name: standardize_validation_results_across_file_types
    description: "Ensures that the output of all validation pipelines follows a consistent, predictable data structure."
  - name: validate_python_code_with_comprehensive_pipeline
    description: "Executes a multi-stage validation process for Python code, including formatting, linting, and policy checks."
  - name: validate_yaml_syntax_and_structure
    description: "Executes a validation process for YAML files to ensure they are well-formed."
  
  # --- LLM & Agent Orchestration ---
  - name: llm_orchestration
    description: "Manages the flow of requests and plans to one or more LLMs."
  - name: llm.client.initialize
    description: "Handles the initialization and configuration of an LLM client."
  - name: llm.client.payload_formatting
    description: "Prepares the API-specific JSON payload for an LLM request."
  - name: llm.client.response_parsing
    description: "Parses the API-specific JSON response from an LLM."
  - name: llm.client.sync_request
    description: "Executes a synchronous (blocking) request to an LLM."
  - name: llm.client.async_request
    description: "Executes an asynchronous (non-blocking) request to an LLM."
  - name: prompt_interpretation
    description: "Processes and enriches prompts with context before sending them to an LLM."
  - name: code_generation
    description: "Specifically handles the generation of new source code."
  - name: documentation
    description: "Specifically handles the generation of documentation (docstrings, comments, etc.)."
  - name: self_correction
    description: "Attempts to automatically fix errors based on validation or test feedback."
  - name: planning
    description: "Breaks down high-level intents into executable steps."
  - name: reconnaissance
    description: "Analyzes a goal and queries the knowledge graph to generate a surgical context report for other agents."
  - name: decomposition
    description: "Structures problems into coherent sub-problems and tasks."
  - name: natural_language_understanding
    description: "Understands and interprets free-text instructions and context."
  - name: conversational_interface
    description: "Provides a direct, natural language interface for the user to interact with the system."
  - name: security_review
    description: "Performs targeted security analysis according to policy."
  - name: refactoring
    description: "Improves code structure without changing behavior."
  - name: autonomous_development
    description: "Orchestrates the full goal -> plan -> execute cycle from a single user command."

  # --- Architecture & Governance Capabilities ---
  - name: cognitive_service.management
    description: "Manages the lifecycle and provision of role-based LLM clients."
  - name: config.load
    description: "Loads a JSON or YAML file with consistent error handling and logging."
  - name: governance.cli.should_fail
    description: "Determines if the CLI should exit with an error based on a drift report."
  - name: governance.cli.load_yaml
    description: "Loads a YAML file specifically for a governance CLI operation."
  - name: governance.cli.save_yaml
    description: "Saves a YAML file with stable ordering for governance operations."
  - name: governance.cli.generate_token
    description: "Generates a deterministic, content-bound approval token for a proposal."
  - name: governance.cli.load_key
    description: "Loads an operator's private key from the secure key store."
  - name: governance.cli.archive_plan
    description: "Archives a rollback plan for an approved proposal."
  - name: system.proposal.canonicalize
    description: "Creates a stable, sorted string of a proposal's core content for consistent hashing and signing."

  # --- Constitutional Auditor Checks (discoverable micro-capabilities) ---
  - name: audit.check.required_files
    description: "Auditor check: Verifies the existence of critical .intent files."
  - name: audit.check.syntax
    description: "Auditor check: Validates the syntax of all .intent YAML/JSON files."
  - name: audit.check.project_manifest
    description: "Auditor check: Validates the integrity of project_manifest.yaml."
  - name: audit.check.capability_coverage
    description: "Auditor check: Ensures all required capabilities are implemented."
  - name: audit.check.capability_definitions
    description: "Auditor check: Ensures all implemented capabilities are defined in this file."
  - name: audit.check.knowledge_graph_schema
    description: "Auditor check: Validates all knowledge graph symbols against the schema."
  - name: audit.check.domain_integrity
    description: "Auditor check: Checks for domain mismatches and illegal imports."
  - name: audit.check.docstrings
    description: "Auditor check: Finds symbols missing docstrings or having generic intents."
  - name: audit.check.dead_code
    description: "Auditor check: Detects unreferenced public symbols."
  - name: audit.check.orphaned_intent_files
    description: "Auditor check: Finds .intent files that are not referenced in meta.yaml."
  - name: audit.check.environment
    description: "Auditor check: Verifies that required environment variables are set."
  - name: audit.check.proposals_schema
    description: "Auditor check: Validates each proposal against its JSON schema."
  - name: audit.check.proposals_drift
    description: "Auditor check: Detects if a proposal's content has changed after being signed."
  - name: audit.check.proposals_list
    description: "Auditor check: Lists all pending proposals for visibility during an audit."
  - name: audit.check.duplication
    description: "Auditor check: Finds structurally identical code, violating the 'dry_by_design' principle."
  - name: fix.headers
    description: "A unified tool to enforce all constitutional header conventions on Python files, including file path comments, docstrings, and future imports."    
  - name: audit.check.content_drift  
    description: "Auditor check: Detects duplicated or inconsistent content across designated data files."
  - name: audit.check.code_style
    description: "Auditor check: Verifies code files adhere to defined style policies (e.g., module docstrings)."
  - name: audit.check.codebase_health
    description: "Auditor check: Measures code complexity and atomicity against defined policies."
  - name: audit.check.secrets
    description: "Auditor check: Scans for hardcoded secrets like API keys or passwords."
  - name: scaffold_project
    description: "Generates a complete, multi-file project structure from a high-level goal, including a starter constitution."

  # --- Planned or Placeholder Capabilities ---
  - name: add_missing_docstrings
    description: "A planned capability to automatically add docstrings to undocumented code."
  - name: refactor_to_shared_function
    description: "A planned capability to consolidate duplicated logic into a single shared function."

  # --- Documentation & Clarity ---
  - name: docs.clarity_audit
    description: "Bundles all human-facing documentation (.md files) for a conceptual clarity review by an LLM."

  # --- Constitutional Peer Review ---
  - name: export_constitution
    description: "Packages the full .intent/ directory into a single bundle for external analysis."
  - name: constitutional_peer_review
    description: "Orchestrates sending the constitutional bundle to an external LLM for critique and suggestions."

  # --- Autonomous Tooling & Agents ---
  - name: agent.capability_tagger
    description: "An agent that finds unassigned capabilities and suggests names."
  - name: fix.unassigned_tags
    description: "A CLI command to run the Capability Tagger Agent."