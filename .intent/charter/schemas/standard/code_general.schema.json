{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "schema_id": "standard.code.general",
  "version": "1.0.0",
  "title": "Code Standards General Schema",
  "description": "Validates code_standards.yaml",

  "type": "object",
  "required": [
    "id", "version", "title", "type", "status", "owners", "review", "schema_id",
    "policy_id", "purpose", "style_rules", "file_header_rules", "import_structure_rules",
    "health_standards", "reuse_rules", "symbol_metadata_rules", "capability_rules",
    "dependency_injection", "naming_conventions", "refactoring_patterns", "refactoring_rules",
    "audit_checks", "module_size_limits"
  ],

  "properties": {
    "id": {"type": "string", "pattern": "^[a-z0-9_.-]+$"},
    "version": {"type": "string", "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"},
    "title": {"type": "string", "maxLength": 200},
    "type": {"type": "string", "enum": ["standard_code"]},
    "status": {"type": "string", "enum": ["active", "draft", "deprecated", "experimental"]},
    "owners": {
      "type": "object",
      "required": ["accountable"],
      "properties": {
        "accountable": {"type": "string"},
        "responsible": {"type": "array", "items": {"type": "string"}}
      },
      "additionalProperties": false
    },
    "review": {
      "type": "object",
      "required": ["frequency"],
      "properties": {
        "frequency": {"type": "string"},
        "last_reviewed": {"type": "string", "format": "date"},
        "next_review_due": {"type": "string", "format": "date"}
      },
      "additionalProperties": false
    },
    "schema_id": {"type": "string", "const": "standard.code.general"},
    "tags": {"type": "array", "items": {"type": "string"}},
    "$schema": {"type": "string"},

    "policy_id": {"type": "string"},
    "purpose": {"type": "string"},
    "style_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "file_header_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "import_structure_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "health_standards": {"type": "object", "additionalProperties": true},
    "reuse_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "symbol_metadata_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "capability_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "dependency_injection": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "naming_conventions": {"type": "object", "additionalProperties": true},
    "refactoring_patterns": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "refactoring_rules": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "audit_checks": {"type": "array", "items": {"type": "object", "additionalProperties": true}},
    "module_size_limits": {"type": "array", "items": {"type": "object", "additionalProperties": true}}
  },

  "additionalProperties": false
}
