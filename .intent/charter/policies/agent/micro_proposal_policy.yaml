policy_id: a5cbb67a-bbe6-4221-b187-1d88692c1124
id: micro_proposal_policy
version: "1.1.0" # Version bump for more granular path rules
title: "Micro-Proposal Policy (Autonomous Fast Track)"
status: active
purpose: >
  Defines the rules and scope for low-risk, autonomous changes that can be
  auto-approved without requiring the full human-in-the-loop constitutional
  amendment process. This is the primary gate for A1 autonomy.

scope:
  applies_to: [agents, cli]

owners:
  primary: "Governance Lead"
  reviewers: ["Core Maintainer"]

review:
  frequency: "6 months"

rules:
  - id: safe_actions
    description: "A list of capability keys that are permitted in micro-proposals."
    enforcement: error
    allowed_actions:
      - "autonomy.self_healing.fix_docstrings"
      - "autonomy.self_healing.format_code"
      - "autonomy.self_healing.fix_headers"

  - id: safe_paths
    description: "Glob patterns for file paths that are safe for autonomous modification."
    enforcement: error
    # --- START MODIFICATION ---
    # We now explicitly allow directory targets for the format_code action,
    # because the underlying tool (black/ruff) is designed to operate on them safely.
    allowed_paths:
      - "docs/**/*.md"
      - "tests/**/*.py"
      - "src/**/*.py"
      - "src" # Allow targeting the whole directory
      - "tests" # Allow targeting the whole directory
    # --- END MODIFICATION ---
    forbidden_paths:
      - ".intent/**"
      - "src/system/governance/**"
      - "src/core/**"
      - "pyproject.toml"
      - "Makefile"

  - id: require_validation
    description: "A micro-proposal must include evidence of a successful pre-flight validation (lint, test, audit)."
    enforcement: error
    required_evidence:
      - "validation_report_id"
