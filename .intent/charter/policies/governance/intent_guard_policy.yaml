# .intent/charter/policies/intent_guard_policy.yaml
version: "2.0.0" # Version bump to clarify Mind/Charter separation.
title: "Intent Guard Policy"
purpose: >
  Ensure that all actions remain aligned with the Constitution. This policy
  protects the immutable Charter from unauthorized modification and governs the
  process for safe, dynamic updates to the working Mind.

scope:
  applies_to:
    - agents
    - cli
    - governance
    - services

owners:
  primary: ["Governance Lead"]
  reviewers: ["Core Maintainer"]

review:
  frequency: "6 months"

rules:
  - id: charter.write_block
    statement: "The Charter (.intent/charter/**) is immutable. Runtime systems, agents, and tools MUST NOT write to it. Changes require a formal amendment."
    enforcement: error

  - id: charter.change_requires_proposal
    statement: "Any change to the Charter (.intent/charter/**) MUST be executed via a ratified proposal with the required approver quorum."
    enforcement: error

  - id: mind.writes_must_be_governed
    statement: "Writes to the Mind (.intent/mind/**) are permitted but MUST be governed. They must originate from a registered capability and pass all relevant safety and validation checks."
    enforcement: warn

  - id: single_active_constitution
    statement: "Exactly one active constitution version MUST be referenced by '.intent/charter/constitution/ACTIVE'."
    enforcement: error

  - id: cli.registry_source_of_truth
    statement: "All operator actions MUST go through registered CLI commands in 'mind/knowledge/cli_registry.yaml'."
    enforcement: error

  - id: auditor.block_on_violation
    statement: "If any guard rule with enforcement=error is violated, the constitutional auditor MUST fail."
    enforcement: error