# .intent/mission/principles.yaml
#
# CORE's Constitution: clear, enforceable, and readable by humans and LLMs.
# Any agent (including future LLMs) must understand and obey these rules.

principles:

  - id: clarity_first
    description: >
      Every function must have:
        - A docstring explaining purpose
        - Clear parameter and return types
        - No nested logic deeper than 3 levels
      If a human cannot understand it in 30 seconds, it must be simplified.

  - id: safe_by_default
    description: >
      Every change must assume rollback or rejection unless explicitly validated.
      No file write, code execution, or intent update may proceed without confirmation.
      Rollback must be possible at every stage.

  - id: reason_with_purpose
    description: >
      Every planning step must include a comment:
        "PURPOSE: This fulfills <principle> from NorthStar."
      Example: "PURPOSE: This fulfills evolvable_structure."
      Actions without purpose tracing are invalid.

  - id: evolvable_structure
    description: >
      CORE may modify its own manifests only if:
        - The change is proposed via IntentBundle
        - It passes all policy checks
        - It is logged with a migration plan
      Self-modification without governance is forbidden.

  - id: no_orphaned_logic
    description: >
      No function, file, or rule may exist without a corresponding entry in the manifest.
      All code must be discoverable and auditable.
      If it's not in function_manifest.json, it does not exist.

  - id: use_intent_bundle
    description: >
      All executable capabilities must be declared and executed via a structured IntentBundle
      that reflects the 10-phase universal reasoning flow.
      No phase may be skipped.
    required_for:
      - all capabilities
      - all autonomous agents
      - all planning functions

  - id: minimalism_over_completeness
    description: >
      Prefer small, focused changes. Do not generate stubs, placeholders, or unused functions.
      If a capability is not actively used or tested, it must be removed.
      Empty implementations are technical debt.

  - id: dry_by_design
    description: >
      No logic may be duplicated. If a function, pattern, or decision exists in one place,
      it must be reused — not rewritten — anywhere else in the system.
      CORE must detect and reject duplication during self-modification.

  - id: single_source_of_truth
    description: >
      The project_manifest.yaml is the single source of truth for all capabilities, structure, and intent.
      All other files (e.g. codegraph.json, function_manifest.json) must be derived from it.
      Manual edits to derived files will be rejected.

  - id: separation_of_concerns
    description: >
      Each domain has a single responsibility:
        - core: orchestration, routing, safety
        - features: capabilities and extensions
        - system/tools: audit, manifest update, introspection
        - clients: external API interaction
      No file may mix logic across domains.
      Violations must be flagged during structural audits.

  - id: predictable_side_effects
    description: >
      Any file change must:
        - Be preceded by a log entry: "CHANGE: <description> — IntentBundle ID: <id>"
        - Be staged via FileHandler (not direct write)
        - Be reversible via Git diff or undo log
      Silent or unlogged changes are forbidden.

  - id: immutable_constitution
    description: >
      The files principles.yaml, manifesto.md, and northstar.yaml are immutable.
      CORE may propose changes via IntentBundle, but may not apply them directly.
      Human review is required for constitutional updates.

  - id: policy_change_requires_human_review
    description: >
      Any change to .intent/policies/*.yaml must be:
      - Proposed via IntentBundle
      - Logged with justification
      - Approved via CLI confirmation or Git merge
    enforcement: manual_review