{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "schema_id": "standard.architecture.user_interface",
  "version": "1.0.0",
  "title": "Architecture Standard \u2013 User Interface",
  "description": "Validates user_interface.yaml with constitutional rigor and structural flexibility",
  "type": "object",
  "required": [
    "id",
    "version",
    "title",
    "type",
    "status",
    "owners",
    "review",
    "schema_id",
    "description",
    "category",
    "layer",
    "principles",
    "architecture",
    "contracts",
    "governance",
    "future_interfaces",
    "examples",
    "related_patterns"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_.-]+$"
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "title": {
      "type": "string",
      "maxLength": 200
    },
    "status": {
      "type": "string",
      "enum": [
        "active",
        "draft",
        "deprecated",
        "experimental"
      ]
    },
    "owners": {
      "type": "object",
      "required": [
        "accountable"
      ],
      "properties": {
        "accountable": {
          "type": "string"
        },
        "responsible": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "review": {
      "type": "object",
      "required": [
        "frequency"
      ],
      "properties": {
        "frequency": {
          "type": "string"
        },
        "last_reviewed": {
          "type": "string",
          "format": "date"
        },
        "next_review_due": {
          "type": "string",
          "format": "date"
        }
      },
      "additionalProperties": false
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "$schema": {
      "type": "string",
      "description": "Optional JSON Schema reference"
    },
    "type": {
      "type": "string",
      "enum": [
        "standard_architecture"
      ]
    },
    "schema_id": {
      "type": "string",
      "const": "standard.architecture.user_interface"
    },
    "description": {
      "type": "string",
      "minLength": 10
    },
    "category": {
      "type": "string"
    },
    "layer": {
      "type": "string"
    },
    "principles": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "statement": {
            "type": "string"
          },
          "rationale": {
            "type": "string",
            "minLength": 10
          }
        },
        "required": [
          "id",
          "statement",
          "rationale"
        ],
        "additionalProperties": false
      },
      "minItems": 1
    },
    "architecture": {
      "type": "object",
      "properties": {
        "entry_points": {
          "type": "object",
          "properties": {
            "end_user": {
              "type": "object",
              "properties": {
                "binary": {
                  "type": "string"
                },
                "location": {
                  "type": "string"
                },
                "purpose": {
                  "type": "string"
                },
                "routing": {
                  "type": "string"
                }
              },
              "required": [
                "binary",
                "location",
                "purpose",
                "routing"
              ],
              "additionalProperties": false
            },
            "operator": {
              "type": "object",
              "properties": {
                "binary": {
                  "type": "string"
                },
                "location": {
                  "type": "string"
                },
                "purpose": {
                  "type": "string"
                },
                "routing": {
                  "type": "string"
                }
              },
              "required": [
                "binary",
                "location",
                "purpose",
                "routing"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "end_user",
            "operator"
          ],
          "additionalProperties": false
        },
        "conversation_flow": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "step": {
                    "type": "string"
                  },
                  "handler": {
                    "type": "string"
                  }
                },
                "required": [
                  "step",
                  "handler"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: handler, step"
              },
              {
                "type": "object",
                "properties": {
                  "step": {
                    "type": "string"
                  },
                  "handler": {
                    "type": "string"
                  },
                  "details": {
                    "type": "string",
                    "minLength": 10
                  }
                },
                "required": [
                  "step",
                  "handler",
                  "details"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: details, handler, step"
              },
              {
                "type": "object",
                "properties": {
                  "step": {
                    "type": "string"
                  },
                  "format": {
                    "type": "string"
                  }
                },
                "required": [
                  "step",
                  "format"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: format, step"
              }
            ]
          },
          "minItems": 1
        },
        "phase_roadmap": {
          "type": "object",
          "properties": {
            "phase_1": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                },
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "status",
                "capabilities"
              ],
              "additionalProperties": false
            },
            "phase_2": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                },
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "status",
                "capabilities"
              ],
              "additionalProperties": false
            },
            "phase_3": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                },
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "status",
                "capabilities"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "phase_1",
            "phase_2",
            "phase_3"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "entry_points",
        "conversation_flow",
        "phase_roadmap"
      ],
      "additionalProperties": false
    },
    "contracts": {
      "type": "object",
      "properties": {
        "conversational_agent": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string"
            },
            "responsibilities": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "dependencies": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "constraints": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "location",
            "responsibilities",
            "dependencies",
            "constraints"
          ],
          "additionalProperties": false
        },
        "context_extraction": {
          "type": "object",
          "properties": {
            "governed_by": {
              "type": "string"
            },
            "rules": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "governed_by",
            "rules"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "conversational_agent",
        "context_extraction"
      ],
      "additionalProperties": false
    },
    "governance": {
      "type": "object",
      "properties": {
        "policies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "audits": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        }
      },
      "required": [
        "policies",
        "audits"
      ],
      "additionalProperties": false
    },
    "future_interfaces": {
      "type": "object",
      "properties": {
        "web_ui": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string"
            },
            "technology": {
              "type": "string"
            },
            "entry_point": {
              "type": "string"
            },
            "routing": {
              "type": "string"
            }
          },
          "required": [
            "location",
            "technology",
            "entry_point",
            "routing"
          ],
          "additionalProperties": false
        },
        "mobile_app": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string"
            },
            "entry_point": {
              "type": "string"
            },
            "routing": {
              "type": "string"
            }
          },
          "required": [
            "location",
            "entry_point",
            "routing"
          ],
          "additionalProperties": false
        },
        "ide_plugin": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string"
            },
            "integration": {
              "type": "string"
            },
            "routing": {
              "type": "string"
            }
          },
          "required": [
            "location",
            "integration",
            "routing"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "web_ui",
        "mobile_app",
        "ide_plugin"
      ],
      "additionalProperties": false
    },
    "examples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "command": {
            "type": "string"
          },
          "flow": {
            "type": "string",
            "minLength": 10
          }
        },
        "required": [
          "description",
          "command",
          "flow"
        ],
        "additionalProperties": false
      },
      "minItems": 1
    },
    "related_patterns": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1
    }
  },
  "additionalProperties": false
}
