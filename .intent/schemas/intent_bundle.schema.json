{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Intent Bundle",
    "description": "A schema for the structured data package representing a single, reasoned action by the CORE system.",
    "type": "object",
    "required": [
        "bundle_id",
        "initiator",
        "created_at",
        "goal",
        "justification",
        "risk_tier",
        "status",
        "evidence"
    ],
    "properties": {
        "bundle_id": {
            "type": "string",
            "description": "A unique identifier for this bundle of work."
        },
        "initiator": {
            "type": "string",
            "description": "The human operator or system agent that initiated the action."
        },
        "created_at": {
            "type": "string",
            "format": "date-time"
        },
        "goal": {
            "type": "string",
            "description": "The high-level goal this bundle is intended to achieve."
        },
        "justification": {
            "type": "string",
            "description": "The constitutional principle(s) this action serves."
        },
        "risk_tier": {
            "type": "string",
            "enum": ["low", "medium", "high"],
            "description": "The assessed risk level of the proposed change."
        },
        "status": {
            "type": "string",
            "enum": ["draft", "planned", "validated", "approved", "executed", "archived", "failed"],
            "description": "The current state in the lifecycle of the bundle."
        },
        "evidence": {
            "type": "object",
            "description": "A collection of links to artifacts that support this action.",
            "properties": {
                "plan_id": { "type": "string" },
                "validation_report_id": { "type": "string" },
                "canary_report_id": { "type": "string" },
                "test_report_id": { "type": "string" },
                "approval_signature_ids": {
                    "type": "array",
                    "items": { "type": "string" }
                }
            }
        }
    }
}