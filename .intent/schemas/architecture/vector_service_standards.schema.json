{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "schema_id": "standard.architecture.vector_service_standards",
  "version": "1.0.0",
  "title": "Architecture Standard \u2013 Vector Service Standards",
  "description": "Validates vector_service_standards.yaml with constitutional rigor and structural flexibility",
  "type": "object",
  "required": [
    "id",
    "version",
    "title",
    "type",
    "status",
    "owners",
    "review",
    "schema_id",
    "policy_id",
    "category",
    "layer",
    "depends_on",
    "philosophy",
    "requirements",
    "collection_standards",
    "vectorizer_patterns",
    "migration",
    "enforcement",
    "tooling",
    "success_criteria",
    "references"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_.-]+$"
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "title": {
      "type": "string",
      "maxLength": 200
    },
    "status": {
      "type": "string",
      "enum": [
        "active",
        "draft",
        "deprecated",
        "experimental"
      ]
    },
    "owners": {
      "type": "object",
      "required": [
        "accountable"
      ],
      "properties": {
        "accountable": {
          "type": "string"
        },
        "responsible": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "review": {
      "type": "object",
      "required": [
        "frequency"
      ],
      "properties": {
        "frequency": {
          "type": "string"
        },
        "last_reviewed": {
          "type": "string",
          "format": "date"
        },
        "next_review_due": {
          "type": "string",
          "format": "date"
        }
      },
      "additionalProperties": false
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "$schema": {
      "type": "string",
      "description": "Optional JSON Schema reference"
    },
    "type": {
      "type": "string",
      "enum": [
        "standard_architecture"
      ]
    },
    "schema_id": {
      "type": "string",
      "const": "standard.architecture.vector_service_standards"
    },
    "policy_id": {
      "type": "string"
    },
    "category": {
      "type": "string"
    },
    "layer": {
      "type": "string"
    },
    "depends_on": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "philosophy": {
      "type": "string",
      "minLength": 10
    },
    "requirements": {
      "type": "object",
      "properties": {
        "deterministic_id_generation": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "prohibited": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string"
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "prohibited",
            "validation",
            "examples"
          ],
          "additionalProperties": false
        },
        "mandatory_hashing": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string",
                  "minLength": 10
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "validation",
            "examples"
          ],
          "additionalProperties": false
        },
        "service_method_usage": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "rationale": {
              "type": "string",
              "minLength": 10
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string",
                  "minLength": 10
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "validation",
            "rationale",
            "examples"
          ],
          "additionalProperties": false
        },
        "standardized_payloads": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "required_fields": {
              "type": "object",
              "properties": {
                "all_payloads": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                },
                "code_vectors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                },
                "constitutional_vectors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "all_payloads",
                "code_vectors",
                "constitutional_vectors"
              ],
              "additionalProperties": false
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string",
                  "minLength": 10
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "validation",
            "required_fields",
            "examples"
          ],
          "additionalProperties": false
        },
        "scroll_pagination": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string",
                  "minLength": 10
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "validation",
            "examples"
          ],
          "additionalProperties": false
        },
        "bidirectional_sync": {
          "type": "object",
          "properties": {
            "mandate": {
              "type": "string",
              "minLength": 10
            },
            "implementation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "validation": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "sync_order": {
              "type": "object",
              "properties": {
                "step_1": {
                  "type": "string"
                },
                "step_2": {
                  "type": "string"
                },
                "rationale": {
                  "type": "string"
                }
              },
              "required": [
                "step_1",
                "step_2",
                "rationale"
              ],
              "additionalProperties": false
            },
            "examples": {
              "type": "object",
              "properties": {
                "compliant": {
                  "type": "string",
                  "minLength": 10
                },
                "non_compliant": {
                  "type": "string",
                  "minLength": 10
                }
              },
              "required": [
                "compliant",
                "non_compliant"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "mandate",
            "implementation",
            "validation",
            "sync_order",
            "examples"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "deterministic_id_generation",
        "mandatory_hashing",
        "service_method_usage",
        "standardized_payloads",
        "scroll_pagination",
        "bidirectional_sync"
      ],
      "additionalProperties": false
    },
    "collection_standards": {
      "type": "object",
      "properties": {
        "naming_convention": {
          "type": "object",
          "properties": {
            "pattern": {
              "type": "string"
            },
            "examples": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "prohibited": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "pattern",
            "examples",
            "prohibited"
          ],
          "additionalProperties": false
        },
        "vector_configuration": {
          "type": "object",
          "properties": {
            "distance_metric": {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                },
                "rationale": {
                  "type": "string"
                }
              },
              "required": [
                "value",
                "rationale"
              ],
              "additionalProperties": false
            },
            "dimension_sources": {
              "type": "object",
              "properties": {
                "default": {
                  "type": "integer"
                },
                "openai_small": {
                  "type": "integer"
                },
                "openai_large": {
                  "type": "integer"
                }
              },
              "required": [
                "default",
                "openai_small",
                "openai_large"
              ],
              "additionalProperties": false
            },
            "payload_storage": {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                },
                "rationale": {
                  "type": "string"
                }
              },
              "required": [
                "value",
                "rationale"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "distance_metric",
            "dimension_sources",
            "payload_storage"
          ],
          "additionalProperties": false
        },
        "lifecycle_management": {
          "type": "object",
          "properties": {
            "creation": {
              "type": "string"
            },
            "deletion": {
              "type": "string"
            },
            "migration": {
              "type": "string"
            }
          },
          "required": [
            "creation",
            "deletion",
            "migration"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "naming_convention",
        "vector_configuration",
        "lifecycle_management"
      ],
      "additionalProperties": false
    },
    "vectorizer_patterns": {
      "type": "object",
      "properties": {
        "standard_structure": {
          "type": "object",
          "properties": {
            "class_name": {
              "type": "string"
            },
            "initialization": {
              "type": "string",
              "minLength": 10
            },
            "core_methods": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "class_name",
            "initialization",
            "core_methods"
          ],
          "additionalProperties": false
        },
        "initialization_pattern": {
          "type": "object",
          "properties": {
            "requirement": {
              "type": "string"
            },
            "example": {
              "type": "string",
              "minLength": 10
            }
          },
          "required": [
            "requirement",
            "example"
          ],
          "additionalProperties": false
        },
        "hash_checking_pattern": {
          "type": "object",
          "properties": {
            "requirement": {
              "type": "string"
            },
            "example": {
              "type": "string",
              "minLength": 10
            }
          },
          "required": [
            "requirement",
            "example"
          ],
          "additionalProperties": false
        },
        "error_handling_pattern": {
          "type": "object",
          "properties": {
            "requirement": {
              "type": "string"
            },
            "example": {
              "type": "string",
              "minLength": 10
            }
          },
          "required": [
            "requirement",
            "example"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "standard_structure",
        "initialization_pattern",
        "hash_checking_pattern",
        "error_handling_pattern"
      ],
      "additionalProperties": false
    },
    "migration": {
      "type": "object",
      "properties": {
        "current_violations": {
          "type": "object",
          "properties": {
            "pattern_vectorizer": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "policy_vectorizer": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "legacy_code": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "pattern_vectorizer",
            "policy_vectorizer",
            "legacy_code"
          ],
          "additionalProperties": false
        },
        "migration_phases": {
          "type": "object",
          "properties": {
            "phase_1_service_methods": {
              "type": "object",
              "properties": {
                "duration": {
                  "type": "string"
                },
                "tasks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                },
                "success_criteria": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "duration",
                "tasks",
                "success_criteria"
              ],
              "additionalProperties": false
            },
            "phase_2_hash_standards": {
              "type": "object",
              "properties": {
                "duration": {
                  "type": "string"
                },
                "tasks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                },
                "success_criteria": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "duration",
                "tasks",
                "success_criteria"
              ],
              "additionalProperties": false
            },
            "phase_3_payload_schemas": {
              "type": "object",
              "properties": {
                "duration": {
                  "type": "string"
                },
                "tasks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                },
                "success_criteria": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "minItems": 1
                }
              },
              "required": [
                "duration",
                "tasks",
                "success_criteria"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "phase_1_service_methods",
            "phase_2_hash_standards",
            "phase_3_payload_schemas"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "current_violations",
        "migration_phases"
      ],
      "additionalProperties": false
    },
    "enforcement": {
      "type": "object",
      "properties": {
        "audit_checks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "severity": {
                "type": "string"
              },
              "check": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "description",
              "severity",
              "check"
            ],
            "additionalProperties": false
          },
          "minItems": 1
        },
        "blocking_conditions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        }
      },
      "required": [
        "audit_checks",
        "blocking_conditions"
      ],
      "additionalProperties": false
    },
    "tooling": {
      "type": "object",
      "properties": {
        "cli_commands": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "command": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "targets": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "command",
                  "description",
                  "targets"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: command, description, targets"
              },
              {
                "type": "object",
                "properties": {
                  "command": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "checks": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "command",
                  "description",
                  "checks"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: checks, command, description"
              },
              {
                "type": "object",
                "properties": {
                  "command": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "safety": {
                    "type": "string"
                  }
                },
                "required": [
                  "command",
                  "description",
                  "safety"
                ],
                "additionalProperties": false,
                "description": "Variant with fields: command, description, safety"
              }
            ]
          },
          "minItems": 1
        },
        "monitoring": {
          "type": "object",
          "properties": {
            "metrics": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "alerts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "condition": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string"
                  }
                },
                "required": [
                  "condition",
                  "action"
                ],
                "additionalProperties": false
              },
              "minItems": 1
            }
          },
          "required": [
            "metrics",
            "alerts"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "cli_commands",
        "monitoring"
      ],
      "additionalProperties": false
    },
    "success_criteria": {
      "type": "object",
      "properties": {
        "consistency": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "efficiency": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "integrity": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "maintainability": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        }
      },
      "required": [
        "consistency",
        "efficiency",
        "integrity",
        "maintainability"
      ],
      "additionalProperties": false
    },
    "references": {
      "type": "object",
      "properties": {
        "related_policies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "related_code": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "discovery_context": {
          "type": "object",
          "properties": {
            "date": {
              "type": "string"
            },
            "issue": {
              "type": "string"
            },
            "symptoms": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "resolution": {
              "type": "string"
            }
          },
          "required": [
            "date",
            "issue",
            "symptoms",
            "resolution"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "related_policies",
        "related_code",
        "discovery_context"
      ],
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "id": "vector_service_standards.schema",
  "owners": {
    "accountable": "Governance Lead"
  },
  "review": {
    "frequency": "12 months"
  }
}
