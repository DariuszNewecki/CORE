{
  "id": "standard_operations_safety",
  "version": "1.2.1",
  "title": "Operations Standard â€“ Safety Framework",
  "type": "policy",
  "status": "active",
  "owners": {
    "accountable": "Safety Owner",
    "responsible": [
      "Core Maintainer"
    ]
  },
  "review": {
    "frequency": "12 months"
  },
  "schema_id": "schema.policy",
  "policy_id": "05ffbf34-2e0e-4069-b77e-473923537077",
  "purpose": "The single source of truth for runtime safety, execution gating, and constitutional boundary protection. Defines immutable assets, forbidden runtime behaviors, and mandatory execution-time guarantees.",
  "rules": [
    {
      "id": "safety.charter_immutable",
      "protected_paths": [
        ".intent/charter/**"
      ],
      "enforcement": "error",
      "statement": "Charter files under .intent/charter/** MUST NOT be modified without a formal constitutional amendment.",
      "rationale": "Charter files define the constitutional contract of the system. Any autonomous modification would invalidate governance legitimacy.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that no autonomous or ungoverned modification touches .intent/charter/**."
        }
      }
    },
    {
      "id": "safety.immutable_constitution",
      "protected_paths": [
        ".intent/charter/constitution/**",
        "mind/knowledge/domain_definitions.yaml",
        "mind_export/northstar.yaml"
      ],
      "enforcement": "error",
      "statement": "Constitutional and mission-defining documents MUST NOT be modified outside a formal amendment process.",
      "rationale": "These artefacts anchor system authority and intent. Runtime or autonomous modification would invalidate governance.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that constitutional or mission-defining documents are not modified outside an approved amendment workflow."
        }
      }
    },
    {
      "id": "safety.no_autonomous_core_modification",
      "protected_paths": [
        "src/core/main.py",
        "src/core/intent_guard.py"
      ],
      "enforcement": "error",
      "statement": "Core orchestration and governance engines MUST NOT be modified autonomously.",
      "rationale": "Core orchestration and governance engines must remain immutable to preserve enforcement integrity.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that core orchestration and governance code is not modified by autonomous agents."
        }
      }
    },
    {
      "id": "safety.deny_core_loop_edit",
      "protected_paths": [
        "src/features/self_healing/autonomy_loop.py",
        "src/will/agents/**"
      ],
      "enforcement": "error",
      "statement": "Autonomous agents MUST NOT modify the autonomy loop or agent implementations.",
      "rationale": "Self-modification of the autonomy loop creates unbounded recursion and loss of control.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that autonomous agents do not modify autonomy loop or agent implementation paths."
        }
      }
    },
    {
      "id": "safety.no_dangerous_execution_primitives",
      "enforcement": "error",
      "statement": "Runtime execution MUST NOT use dangerous execution primitives.",
      "rationale": "Dangerous execution primitives bypass static analysis and runtime governance safeguards.",
      "check": {
        "engine": "ast_gate",
        "params": {
          "check_type": "forbidden_primitives"
        }
      }
    },
    {
      "id": "safety.runtime_contract_enforced",
      "enforcement": "error",
      "statement": "A mutating operation MUST NOT execute unless its safety contract has been validated by IntentGuard at runtime.",
      "rationale": "Execution without validated safety contracts bypasses IntentGuard and breaks constitutional enforcement.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that all mutating operations are gated by runtime validation of their declared safety contracts."
        }
      }
    },
    {
      "id": "safety.change_must_be_logged",
      "enforcement": "error",
      "statement": "Every file modification MUST be preceded by an audit log entry containing a valid IntentBundle identifier.",
      "rationale": "All changes must be traceable to preserve auditability and accountability.",
      "check": {
        "engine": "llm_gate",
        "params": {
          "instruction": "Verify that all file modifications are associated with a recorded IntentBundle."
        }
      }
    }
  ],
  "notes": {
    "optimization_review": "safety.no_dangerous_execution_primitives already uses ast_gate correctly. Remaining 6 llm_gate rules require semantic understanding of autonomous modification patterns and runtime contracts."
  },
  "enforcement_levels": {
    "error": {
      "description": "Critical violation. Blocks merge, deployment, and runtime execution.",
      "ci_behavior": "fail",
      "runtime_behavior": "block"
    },
    "warn": {
      "description": "Non-critical issue. Reported but does not block execution.",
      "ci_behavior": "pass_with_warnings",
      "runtime_behavior": "log_and_continue"
    },
    "info": {
      "description": "Informational finding. No action required.",
      "ci_behavior": "ignore",
      "runtime_behavior": "ignore"
    }
  },
  "additionalProperties": false
}
